import { createMint } from "@solana/spl-token";
import "dotenv/config";
import {
  getKeypairFromEnvironment,
  getExplorerLink,
} from "@solana-developers/helpers";
import { Connection, clusterApiUrl } from "@solana/web3.js";

const connection = new Connection(clusterApiUrl("devnet"));

const user = getKeypairFromEnvironment("SECRET_KEY");

console.log(
  `ðŸ”‘ Loaded our keypair securely, using an env file! Our public key is: ${user.publicKey.toBase58()}`
);



/*
##############################################################
This is the same as using createMint, createMint is a shortcut
##############################################################

const transaction = new web3.Transaction().add(
    web3.SystemProgram.createAccount({
      fromPubkey: payer,
      newAccountPubkey: accountKeypair.publicKey,
      space: token.MINT_SIZE,
      lamports,
      programId,
    }),
    token.createInitializeMintInstruction(
      accountKeypair.publicKey,
      decimals,
      payer,
      payer,
      programId
    )
  );

*/
const tokenMint = await createMint(connection,user,user.publicKey,null,2)

const link = getExplorerLink("address",tokenMint.toString(),"devnet")

console.log(`âœ… Finished! Created token mint: ${link}`);